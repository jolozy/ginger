<!DOCTYPE html>

<html lang="en-US">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="assets/fonts/font-awesome.css" rel="stylesheet" type="text/css">
  <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.css" type="text/css">
  <link rel="stylesheet" href="assets/css/bootstrap-select.min.css" type="text/css">
  <link rel="stylesheet" href="assets/css/owl.carousel.css" type="text/css">
  <link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.css" type="text/css">
  <link rel="stylesheet" href="assets/css/style.css" type="text/css">
  <link rel="stylesheet" href="assets/css/user.style.css" type="text/css">
  <title>
    <%= title %>
  </title>
  <style>
    @media (min-width: 767px) {
      #burger {
        visibility: hidden;
      }
    }
  </style>
</head>

<body onunload="" class="map-fullscreen page-homepage navigation-off-canvas" id="page-top">

  <!-- Outer Wrapper-->
  <div id="outer-wrapper">
    <!-- Inner Wrapper -->
    <div id="inner-wrapper">
      <!-- Navigation-->
      <div class="header">
        <div class="wrapper">
          <div class="brand">
            <a href="/"><img src="assets/img/logo.png" alt="logo"></a>
          </div>
          <nav class="navigation-items">
            <div class="wrapper">
              <ul class="main-navigation navigation-top-header"></ul>
              <ul class="user-area">
                <li><a href="sign-in.html">Sign In</a></li>
                <li><a href="register.html"><strong>Register</strong></a></li>
                <li><a href="/about">About Us</a></li>
              </ul>
              <a href="./submit" class="submit-item">
                <div class="content"><span>Submit Your Item</span></div>
                <div class="icon">
                  <i class="fa fa-plus"></i>
                </div>
              </a>
              <div class="toggle-navigation">
                <div class="icon" id="burger">
                  <div class="line"></div>
                  <div class="line"></div>
                  <div class="line"></div>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </div>
      <!-- end Navigation-->
      <!-- Page Canvas-->
      <div id="page-canvas">
        <!--Off Canvas Navigation-->
        <nav class="off-canvas-navigation">
          <header>Navigation</header>
          <div class="main-navigation navigation-off-canvas"></div>
        </nav>
        <!--end Off Canvas Navigation-->
        <!--Page Content-->
        <div id="page-content">
          <!-- Map Canvas-->
          <div class="map-canvas list-width-30">
            <!-- Map -->
            <div class="map">
              <div class="toggle-navigation">
                <div class="icon">
                  <div class="line"></div>
                  <div class="line"></div>
                  <div class="line"></div>
                </div>
              </div>
              <!--/.toggle-navigation-->
              <div id="map" class="has-parallax"></div>
              <!--/#map-->
              <div class="search-bar horizontal">
                <form class="main-search border-less-inputs" role="form" method="post">
                  <div class="input-row">
                    <!-- <div class="form-group">
                      <input type="text" class="form-control" id="keyword" placeholder="Enter Keyword">
                    </div> -->
                    <!-- /.form-group -->
                    <div class="form-group">
                      <div class="input-group location">
                        <input type="text" class="form-control" id="location" placeholder="Enter Location">
                        <span class="input-group-addon"><i class="fa fa-map-marker geolocation" data-toggle="tooltip" data-placement="bottom" title="Find my position"></i></span>
                      </div>
                    </div>
                    <!-- /.form-group -->
                    <!-- <div class="form-group">
                      <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                    </div> -->
                    <!-- /.form-group -->
                    <div class="form-group">
                      <select name="category" multiple title="Select Category" data-live-search="true">
                        <option value="a">Food</option>
                        <option value="a1" class="sub-category">Halal</option>
                        <option value="a2" class="sub-category">Non-halal</option>
                        <option value="b">Groceries</option>
                        <option value="b1" class="sub-category">Supermarkets</option>
                        <option value="b2" class="sub-category">Convenience Stores</option>
                        <option value="c">Leisure</option>
                        <option value="c1" class="sub-category">Shopping Malls</option>
                        <option value="c2" class="sub-category">Lan Shop</option>
                        <option value="c3" class="sub-category">Spa</option>
                        <option value="c5" class="sub-category">Gym</option>
                        <option value="d">Medical</option>
                        <option value="d1" class="sub-category">Hospital</option>
                        <option value="d2" class="sub-category">General Practioners</option>
                        <option value="d3" class="sub-category">Vieterinary Clinic</option>
                        <option value="e">Services</option>
                        <option value="e1" class="sub-category">Petrol Kiosks</option>
                        <option value="e2" class="sub-category">Printing</option>
                        <option value="e3" class="sub-category">Laundromats</option>
                      </select>
                    </div>
                    <!-- /.form-group -->
                  </div>
                  <!-- /.input-row -->
                </form>
                <!-- /.main-search -->
              </div>
              <!-- /.search-bar -->
            </div>
            <!-- end Map -->
            <!--Items List-->
            <div class="items-list">
              <div class="inner">
                <header>
                  <h3>Results</h3>
                </header>
                <div class="route-control"><a href="#">click to hide directions</a></div>
                <div id="route-display"></div>
                <div class="route-control"><a href="#">click to hide directions</a></div>
                <ul class="results list">

                </ul>
              </div>
              <!--results-->
            </div>
            <!--end Items List-->
          </div>
          <!-- end Map Canvas-->

        </div>
        <!-- end Page Content-->
      </div>
      <!-- end Page Canvas-->
      <!--Page Footer-->
      <footer id="page-footer">
        <div class="inner">
          <div class="footer-bottom">
            <div class="container" align="center">
              Â© Ginger Singapore, Inc.
            </div>
          </div>
          <!--/.footer-bottom-->
        </div>
      </footer>
      <!--end Page Footer-->
    </div>
    <!-- end Inner Wrapper -->
  </div>
  <!-- end Outer Wrapper-->

  <script type="text/javascript" src="assets/js/jquery-2.1.0.min.js"></script>
  <script type="text/javascript" src="assets/js/before.load.js"></script>
  <script type="text/javascript" src="assets/js/jquery-migrate-1.2.1.min.js"></script>
  <script type="text/javascript" src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="assets/js/smoothscroll.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap-select.min.js"></script>
  <script type="text/javascript" src="assets/js/jquery.hotkeys.js"></script>
  <script type="text/javascript" src="assets/js/jquery.nouislider.all.min.js"></script>
  <script type="text/javascript" src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=places"></script>
  <script type="text/javascript" src="assets/js/infobox.js"></script>
  <script type="text/javascript" src="assets/js/richmarker-compiled.js"></script>
  <script type="text/javascript" src="assets/js/markerclusterer.js"></script>
  <script type="text/javascript" src="assets/js/custom.js"></script>
  <script type="text/javascript" src="assets/js/maps.js"></script>

  <!--[if lte IE 9]>
<script type="text/javascript" src="assets/js/ie-scripts.js"></script>
<![endif]-->

  <script>
    var _latitude = 1.36080344;
    var _longitude = 103.81565094;
    var jsonPath = '/api/listings';
    $(".route-control").hide();
    $(".route-control").click(function(){
        $(".route-control").fadeOut("slow");
        $("#route-display").fadeOut("slow");
    });

    // Load JSON data and create Google Maps
    loadGoogleMap(jsonPath);

    function loadGoogleMap(jsonPath) {
      $.getJSON(jsonPath)
        .done(function(json) {
          createHomepageGoogleMap(_latitude, _longitude, json);
        })
        .fail(function(jqxhr, textStatus, error) {
          console.log(error);
        });
    }

    // Set if language is RTL and load Owl Carousel

    $(window).load(function() {
      var rtl = true; // Use RTL
      initializeOwl(rtl);

      var type = [];

      $("li[rel='0']").click(function() {
        setTimeout(selectFood, 0);
      });

      $("li[rel='1']").click(function() {
        setTimeout(selectHalal, 0);
      });

      $("li[rel='2']").click(function() {
        setTimeout(selectNonHalal, 0);
      });

      $("li[rel='3']").click(function() {
        setTimeout(selectGroceries, 0);
      });

      $("li[rel='4']").click(function() {
        setTimeout(selectSupermarket, 0);
      });

      $("li[rel='5']").click(function() {
        setTimeout(selectConvenienceStore, 0);
      });

      $("li[rel='6']").click(function() {
        setTimeout(selectLeisure, 0);
      });

      $("li[rel='7']").click(function() {
        setTimeout(selectShoppingMall, 0);
      });

      $("li[rel='8']").click(function() {
        setTimeout(selectLanshop, 0);
      });

      $("li[rel='9']").click(function() {
        setTimeout(selectSpa, 0);
      });

      $("li[rel='10']").click(function() {
        setTimeout(selectGym, 0);
      });

      $("li[rel='11']").click(function() {
        setTimeout(selectMedical, 0);
      });

      $("li[rel='12']").click(function() {
        setTimeout(selectPublicHospital, 0);
      });

      $("li[rel='13']").click(function() {
        setTimeout(selectGP, 0);
      });

      $("li[rel='14']").click(function() {
        setTimeout(selectVeterinary, 0);
      });

      $("li[rel='15']").click(function() {
        setTimeout(selectServices, 0);
      });

      $("li[rel='16']").click(function() {
        setTimeout(selectPetrolKiosk, 0);
      });

      $("li[rel='17']").click(function() {
        setTimeout(selectPrinting, 0);
      });

      $("li[rel='18']").click(function() {
        setTimeout(selectLaundromats, 0);
      });


      function selectFood() {
        if ($("li[rel='0']").hasClass("selected")) {
          type.push("halal");
          type.push("non-halal");
          $("li[rel='1']").addClass("selected");
          $("li[rel='2']").addClass("selected");
        } else {
          type.pop("halal");
          type.pop("non-halal");
          $("li[rel='1']").removeClass("selected");
          $("li[rel='2']").removeClass("selected");
        }
      }

      function selectGroceries() {
        if ($("li[rel='3']").hasClass("selected")) {
          type.push("supermarket");
          type.push("convenience_store");
          $("li[rel='4']").addClass("selected");
          $("li[rel='5']").addClass("selected");
        } else {
          type.pop("supermarket");
          type.pop("convenience_store");
          $("li[rel='4']").removeClass("selected");
          $("li[rel='5']").removeClass("selected");
        }
      }

      function selectLeisure() {
        if ($("li[rel='6']").hasClass("selected")) {
          type.push("shopping_mall");
          type.push("lan_shop");
          type.push("spa");
          type.push("gym");
          $("li[rel='7']").addClass("selected");
          $("li[rel='8']").addClass("selected");
          $("li[rel='9']").addClass("selected");
          $("li[rel='10']").addClass("selected");
        } else {
          type.pop("shopping_mall");
          type.pop("lan_shop");
          type.pop("spa");
          type.pop("gym");
          $("li[rel='7']").removeClass("selected");
          $("li[rel='8']").removeClass("selected");
          $("li[rel='9']").removeClass("selected");
          $("li[rel='10']").removeClass("selected");
        }
      }


      function selectMedical() {
        if ($("li[rel='11']").hasClass("selected")) {
          type.push("public_hospital");
          type.push("gp");
          type.push("veterinary_clinic");
          $("li[rel='12']").addClass("selected");
          $("li[rel='13']").addClass("selected");
          $("li[rel='14']").addClass("selected");
        } else {
          type.pop("public_hospital");
          type.pop("gp");
          type.pop("veterinary_clinic");
          $("li[rel='12']").removeClass("selected");
          $("li[rel='13']").removeClass("selected");
          $("li[rel='14']").removeClass("selected");
        }
      }

      function selectServices() {
        if ($("li[rel='15']").hasClass("selected")) {
          type.push("petrol_kiosk");
          type.push("gp");
          type.push("veterinary_clinic");
          $("li[rel='16']").addClass("selected");
          $("li[rel='17']").addClass("selected");
          $("li[rel='18']").addClass("selected");
        } else {
          type.pop("petrol_kiosk");
          type.pop("gp");
          type.pop("veterinary_clinic");
          $("li[rel='16']").removeClass("selected");
          $("li[rel='17']").removeClass("selected");
          $("li[rel='18']").removeClass("selected");
        }
      }

      function selectHalal() {
          if ($("li[rel='1']").hasClass("selected")) {
            type.push("halal");
            alert("halal pushed");
          }
          else {
            type.pop("halal");
            alert("halal popped");
          }
          alert("Type: " + type)
          remap(type)
      }

      function selectNonHalal() {
        if ($("li[rel='2']").hasClass("selected")) {
          type.push("non-halal");
          alert("non-halal pushed")
        }
        else {
          type.pop("non-halal");
          alert("non-halal popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectSupermarket() {
        if ($("li[rel='4']").hasClass("selected")) {
          type.push("supermarket");
          alert("supermarket pushed")
        }
        else {
          type.pop("supermarket");
          alert("supermarket pushed popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectConvenienceStore() {
        if ($("li[rel='5']").hasClass("selected")) {
          type.push("convenience_store");
          alert("convenience store pushed")
        }
        else {
          type.pop("convenience_store");
          alert("convenience store popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectShoppingMall() {
        if ($("li[rel='7']").hasClass("selected")) {
          type.push("shopping_mall");
          alert("shopping mall pushed")
        }
        else {
          type.pop("shopping_mall");
          alert("shopping mall popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectLanshop() {
        if ($("li[rel='8']").hasClass("selected")) {
          type.push("lanshop");
          alert("lanshop pushed")
        }
        else {
          type.pop("lanshop");
          alert("lanshop popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectSpa() {
        if ($("li[rel='9']").hasClass("selected")) {
          type.push("spa");
          alert("spa pushed")
        }
        else {
          type.pop("spa");
          alert("spa popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectGym() {
        if ($("li[rel='10']").hasClass("selected")) {
          type.push("gym");
          alert("gym pushed")
        }
        else {
          type.pop("gym");
          alert("gym popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectPublicHospital() {
        if ($("li[rel='12']").hasClass("selected")) {
          type.push("public_hospital");
          alert("public_hospital pushed")
        }
        else {
          type.pop("public_hospital");
          alert("public_hospital popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectGP() {
        if ($("li[rel='13']").hasClass("selected")) {
          type.push("gp");
          alert("gp pushed")
        }
        else {
          type.pop("gp");
          alert("gp popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectVeterinary() {
        if ($("li[rel='14']").hasClass("selected")) {
          type.push("veterinary_clinic");
          alert("veterinary_clinic pushed")
        }
        else {
          type.pop("veterinary_clinic");
          alert("veterinary_clinic popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectPetrolKiosk() {
        if ($("li[rel='16']").hasClass("selected")) {
          type.push("petrol_kiosk");
          alert("petrol_kiosk pushed")
        }
        else {
          type.pop("petrol_kiosk");
          alert("petrol_kiosk popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectPrinting() {
        if ($("li[rel='16']").hasClass("selected")) {
          type.push("printing");
          alert("printing pushed")
        }
        else {
          type.pop("printing");
          alert("printing popped");
        }
          alert("Type: " + type)
          remap(type)
      }

      function selectLaundromats() {
        if ($("li[rel='16']").hasClass("selected")) {
          type.push("laundromats");
          alert("laundromats pushed")
        }
        else {
          type.pop("laundromats");
          alert("laundromats popped");
        }
          alert("Type: " + type)
          remap(type)
      }





      function remap(type) {
        alert("Number of Items" + type.length);
        if (type.length == 0) {
          var jsonPath = '/api/listings/'
        }
        else {
          var jsonPath = '/api/custom?type=' + type.join(',');
        }
        loadGoogleMap(jsonPath);
      }


    });

autoComplete();

  </script>

  <!--[if lte IE 9]>
<script type="text/javascript" src="assets/js/ie-scripts.js"></script>
<![endif]-->
</body>

</html>
